<html>
<head>
    <link rel="preconnect" href="http://fonts.gstatic.com">
    <link href="http://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* 960 Grid System */
        /**
         * Generated with https://github.com/trungdq88/960-grid-generator
         * Columns number: 12 column(s)
         * Column width: 44px
         * Column space: 10px
         *
         * Content width: 638px
         * Full width: 648px
         */

        body {
            display: block;
            margin: 0 auto;
            min-width: 648px;
            font-size: 13px;
        }
        .container_12 {
            margin-left: auto;
            margin-right: auto;
            width: 648px;
            overflow: hidden;
        }
        .grid_1,
        .grid_2,
        .grid_3,
        .grid_4,
        .grid_5,
        .grid_6,
        .grid_7,
        .grid_8,
        .grid_9,
        .grid_10,
        .grid_11,
        .grid_12
        {
            display:inline;
            float: left;
            position: relative;
            margin-left: 5px;
            margin-right: 5px;
        }
        .push_1,.pull_1,
        .push_2,.pull_2,
        .push_3,.pull_3,
        .push_4,.pull_4,
        .push_5,.pull_5,
        .push_6,.pull_6,
        .push_7,.pull_7,
        .push_8,.pull_8,
        .push_9,.pull_9,
        .push_10,.pull_10,
        .push_11,.pull_11,
        .pull_12,.push_12
        {
            position:relative;
        }
        .alpha {
            margin-left: 0;
        }
        .omega {
            margin-right: 0;
        }
        .container_12 .grid_1 {
            width: 44px
        }
        .container_12 .grid_2 {
            width: 98px
        }
        .container_12 .grid_3 {
            width: 152px
        }
        .container_12 .grid_4 {
            width: 206px
        }
        .container_12 .grid_5 {
            width: 260px
        }
        .container_12 .grid_6 {
            width: 314px
        }
        .container_12 .grid_7 {
            width: 368px
        }
        .container_12 .grid_8 {
            width: 422px
        }
        .container_12 .grid_9 {
            width: 476px
        }
        .container_12 .grid_10 {
            width: 530px
        }
        .container_12 .grid_11 {
            width: 584px
        }
        .container_12 .grid_12 {
            width: 638px
        }
        .container_12 .prefix_1 {
            padding-left: 54px
        }
        .container_12 .prefix_2 {
            padding-left: 108px
        }
        .container_12 .prefix_3 {
            padding-left: 162px
        }
        .container_12 .prefix_4 {
            padding-left: 216px
        }
        .container_12 .prefix_5 {
            padding-left: 270px
        }
        .container_12 .prefix_6 {
            padding-left: 324px
        }
        .container_12 .prefix_7 {
            padding-left: 378px
        }
        .container_12 .prefix_8 {
            padding-left: 432px
        }
        .container_12 .prefix_9 {
            padding-left: 486px
        }
        .container_12 .prefix_10 {
            padding-left: 540px
        }
        .container_12 .prefix_11 {
            padding-left: 594px
        }
        .container_12 .suffix_1 {
            padding-right: 54px
        }
        .container_12 .suffix_2 {
            padding-right: 108px
        }
        .container_12 .suffix_3 {
            padding-right: 162px
        }
        .container_12 .suffix_4 {
            padding-right: 216px
        }
        .container_12 .suffix_5 {
            padding-right: 270px
        }
        .container_12 .suffix_6 {
            padding-right: 324px
        }
        .container_12 .suffix_7 {
            padding-right: 378px
        }
        .container_12 .suffix_8 {
            padding-right: 432px
        }
        .container_12 .suffix_9 {
            padding-right: 486px
        }
        .container_12 .suffix_10 {
            padding-right: 540px
        }
        .container_12 .suffix_11 {
            padding-right: 594px
        }
        .container_12 .push_1 {
            left: 54px
        }
        .container_12 .push_2 {
            left: 108px
        }
        .container_12 .push_3 {
            left: 162px
        }
        .container_12 .push_4 {
            left: 216px
        }
        .container_12 .push_5 {
            left: 270px
        }
        .container_12 .push_6 {
            left: 324px
        }
        .container_12 .push_7 {
            left: 378px
        }
        .container_12 .push_8 {
            left: 432px
        }
        .container_12 .push_9 {
            left: 486px
        }
        .container_12 .push_10 {
            left: 540px
        }
        .container_12 .push_11 {
            left: 594px
        }
        .container_12 .pull_1 {
            left: -54px
        }
        .container_12 .pull_2 {
            left: -108px
        }
        .container_12 .pull_3 {
            left: -162px
        }
        .container_12 .pull_4 {
            left: -216px
        }
        .container_12 .pull_5 {
            left: -270px
        }
        .container_12 .pull_6 {
            left: -324px
        }
        .container_12 .pull_7 {
            left: -378px
        }
        .container_12 .pull_8 {
            left: -432px
        }
        .container_12 .pull_9 {
            left: -486px
        }
        .container_12 .pull_10 {
            left: -540px
        }
        .container_12 .pull_11 {
            left: -594px
        }

        /* Clear Floated Elements
        ----------------------------------------------------------------------------------------------------*/

        /* http://sonspring.com/journal/clearing-floats */

        .clear {
            clear: both;
            display: block;
            overflow: hidden;
            visibility: hidden;
            width: 0;
            height: 0;
        }

        /* http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified */

        .clearfix:before,
        .clearfix:after {
            content: '\0020';
            display: block;
            overflow: hidden;
            visibility: hidden;
            width: 0;
            height: 0;
        }

        .clearfix:after {
            clear: both;
        }

        /*
          The following zoom:1 rule is specifically for IE6 + IE7.
          Move to separate stylesheet if invalid CSS is a problem.
        */

        .clearfix {
            zoom: 1;
        }
    </style>

    <style>
        /* Custom Styles */

        body {
            font-family: 'Poppins', sans-serif;
            font-weight: 400;
            color: #474747;
        }

        .w-full {
            width: 100%;
        }

        .fw-500 {
            font-weight: 500;
            color: #000000;
        }

        table, th, td {
            border-collapse: collapse;
            border: 1px solid  #dee2e6;
            width: 100%;
            text-align: left;
            font-size: 10px;
        }

        table thead th {
            padding: 8px 5px;
            width: auto;
            background-color: #f9f9f9;
        }

        table tbody th,
        table tbody td {
            padding: 5px;
            width: auto;
        }

        table tr {
            page-break-inside: avoid;
        }
        td{
            word-break: break-word;
        }
    </style>
</head>

<body style="display: block; margin: 0 auto; background: #ffffff;">
<div class="pdf-body">
    <div>
        <div class="grid_12" style="margin-bottom: 10px;">
            <h4>Floral Program Order List</h4>
        </div>
        <div class="grid_12">
            <table>
                <thead>
                <tr>
                    @if(in_array('order_number', $columns))<th style="min-width: 50px">Order Number</th>@endif
                    @if(in_array('site', $columns))<th style="min-width: 30px">Site</th>@endif
                    @if(in_array('items', $columns))<th style="min-width: 30px">Items</th>@endif
                    @if(in_array('customer_name', $columns))<th style="min-width: 30px">Customer Name</th>@endif
                    @if(in_array('address', $columns))<th style="min-width: 30px">Address</th>@endif
                    @if(in_array('phone_number', $columns))<th style="min-width: 30px">Phone Number</th>@endif
                    @if(in_array('email', $columns))<th style="min-width: 30px">Email</th>@endif
                    @if(in_array('order_date', $columns))<th style="min-width: 30px">Order Date</th>@endif
                    @if(in_array('order_status', $columns))<th style="min-width: 30px">Order Status</th>@endif
                    @if(in_array('payment_status', $columns))<th style="min-width: 30px">Payment Status</th>@endif
                    @if(in_array('invoice_number', $columns))<th style="min-width: 50px">Invoice Number</th>@endif
                    @if(in_array('refund_number', $columns))<th style="min-width: 30px">Refund Number</th>@endif
                    @if(in_array('purchase_order_status', $columns))<th style="min-width: 30px">Purchase Order Status</th>@endif
                    @if(in_array('work_order_status', $columns))<th style="min-width: 30px">Work Order Status</th>@endif
                    @if(in_array('fld_type', $columns))<th style="min-width: 30px">Type</th>@endif
                </tr>
                </thead>

                <tbody>
                @if(!empty($flowerDrivesDetails))
                    @foreach($flowerDrivesDetails as $flowerDriveOrders)
                        
                        <tr>
                            @if(in_array('order_number', $columns))<td>{{$flowerDriveOrders->order_number ? decodeHtml($flowerDriveOrders->order_number) : '-'}}</td>@endif
                            @if(in_array('site', $columns))<td>{{$flowerDriveOrders->terr_name ? decodeHtml($flowerDriveOrders->terr_name): '-'}}</td>@endif
                            @if(in_array('items', $columns))<td>{{$flowerDriveOrders->line_name ? decodeHtml($flowerDriveOrders->line_name ): '-'}}</td>@endif
                            @if(in_array('customer_name', $columns))<td>{{$flowerDriveOrders->customer ? decodeHtml($flowerDriveOrders->customer): '-'}}</td>@endif
                            @if(in_array('address', $columns))<td>{{$flowerDriveOrders->address ? decodeHtml($flowerDriveOrders->address): '-'}}</td>@endif
                            @if(in_array('phone_number', $columns))<td>{{$flowerDriveOrders->phone_number ? decodeHtml($flowerDriveOrders->phone_number ): '-'}}</td>@endif
                            @if(in_array('email', $columns))<td>{{$flowerDriveOrders->email ? decodeHtml($flowerDriveOrders->email): '-'}}</td>@endif
                            @if(in_array('order_date', $columns))<td>{{$flowerDriveOrders->created_at ? formatDateTime($flowerDriveOrders->created_at) : '-'}}</td>@endif
                            @if(in_array('order_status', $columns))
                                @if($flowerDriveOrders['order_status'] === 'ODRD')
                                    <td>{{decodeHtml('Ordered')}}</td>
                                @endif
                                @if($flowerDriveOrders['order_status'] === 'PDING')
                                    <td>{{decodeHtml('Pending')}}</td>
                                @endif
                                @if($flowerDriveOrders['order_status'] === 'CANCEL_IN_PROGRESS')
                                    <td>{{decodeHtml('Cancel in progress')}}</td>
                                @endif
                                @if($flowerDriveOrders['order_status'] === 'CNCLED')
                                    <td>{{decodeHtml('Cancelled')}}</td>
                                @endif
                                @if($flowerDriveOrders['order_status'] === 'RECVD')
                                    <td>{{decodeHtml('Received')}}</td>
                                @endif
                                @if($flowerDriveOrders['order_status'] === 'PSTDUE')
                                    <td>{{decodeHtml('Past due')}}</td>
                                @endif
                            @endif
         
                            @if (in_array('payment_status', $columns))
                                <td>
                                    @if ($flowerDriveOrders->tran_type == null )
                                        -
                                    @elseif ($flowerDriveOrders->tran_type == 'WEB_PAYMENT' && $flowerDriveOrders->tran_status == 'APPROVED')
                                        Paid
                                    @elseif (Illuminate\Support\Str::contains($flowerDriveOrders->tran_type, 'REFUND') && $flowerDriveOrders->tran_status == 'APPROVED')
                                        Refunded
                                    @else
                                        Cancel In Progress
                                    @endif
                                </td>
                            @endif
                            @if(in_array('invoice_number', $columns))<td>{{$flowerDriveOrders->inv_no ? decodeHtml($flowerDriveOrders->inv_no): '-'}}</td>@endif
                            @if(in_array('refund_number', $columns))<td>
                                    @if ($flowerDriveOrders->tran_ref != null && str_contains($flowerDriveOrders->tran_type, 'REFUND') && $flowerDriveOrders->tran_status == 'APPROVED')
                                        {{ explode(',', $flowerDriveOrders->tran_ref)[0] }}
                                    @else
                                        -
                                    @endif
                            @endif
                                </td>
                            @if(in_array('purchase_order_status', $columns))
                                @if(str_contains($flowerDriveOrders['po_status'], 'NOT_SENT'))
                                    <td>{{decodeHtml('Not sent')}}</td>
                               
                                @elseif(str_contains($flowerDriveOrders['po_status'], 'CANCELLED'))
                                    <td>{{decodeHtml('Cancelled')}}</td>
                                
                                @elseif(str_contains($flowerDriveOrders['po_status'], 'ORDERED'))
                                    <td>{{decodeHtml('Ordered')}}</td>
                                
                                @elseif(str_contains($flowerDriveOrders['po_status'], 'RECEIVED'))
                                    <td>{{decodeHtml('Received')}}</td>
                                @else
                                    <td>{{decodeHtml('-')}}</td>
                                @endif

                            @endif
                            @if(in_array('work_order_status', $columns))<td>{{$flowerDriveOrders->wo_status ? decodeHtml($flowerDriveOrders->wo_status): '-'}}</td>@endif
                            @if(in_array('fld_type', $columns))
                                            @if($flowerDriveOrders->fld_type === 'CAMPAIGN')
                                                <td>{{decodeHtml('Floral Campaign')}}</td>
                                            @endif
                                            @if($flowerDriveOrders->fld_type === 'STORE')
                                                <td>{{decodeHtml('Floral Store')}}</td>
                                            @endif
                                    @endif
                        </tr>
                    @endforeach
                @endif
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
